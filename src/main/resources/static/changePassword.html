<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>修改密码</title>
    <link rel="stylesheet" type="text/css" href="css/mui.min.css"/>
    <link rel="stylesheet" type="text/css" href="css/iconfont.css"/>
    <style type="text/css">
    		.mui-input-row label {
    			width: 20%;
    		}
    		.mui-input-row label~input {
    			width: 80%;
    		}
    		.own-btn-green {
		    color: #fff;
		    border: 1px solid #57a9fa;
		    background-color: #57a9fa;
		    }
    </style>
</head>
<body>
	<header class="mui-bar mui-bar-nav" style="background-color:#57a9fa;">
			<a href="mine.html"><span class="mui-icon mui-icon-arrowthinleft" style="color:white;font-size:30px;padding-top: 5px;"></span>
			</a>
			<h1 class="mui-title" style="color:white;" >修改密码</h1>
	</header>
	
	<div class="mui-content own-content-padding">
		<div class="mui-card" style="margin-top: 30px;">
			<form class="mui-input-group">
				<!--<div class="mui-input-row">
					<label><span class="mui-icon iconfont icon-zhanghao"></span></label>
					<input id="userName" type="text" class="mui-input-clear" placeholder="用户名" ></input>
				</div>-->
				<div class="mui-input-row">
					<label><span class="mui-icon iconfont icon-jiumima"></span></label>
					<input id="oldPassword" type="password" class="mui-input-clear" placeholder="旧密码" ></input>
				</div>
				<div class="mui-input-row">
					<label><span class="mui-icon iconfont icon-mimaxiugai"></span></label>
					<input id="newPassword" type="password" class="mui-input-clear" placeholder="新密码" ></input>
				</div>
				<div class="mui-input-row">
					<label><span class="mui-icon iconfont icon-queren"></span></label>
					<input id="repeatPassword" type="password" class="mui-input-clear" placeholder="确认新密码" ></input> 
				</div>
			</form>
		</div>
		<div class="mui-button-row" style="margin: 10px 15px;">
			<button id="modifyPassword" type="button" class="mui-btn mui-btn-link own-btn-green mui-btn-block" style="padding: 5px 0px;background-color:#57a9fa;color: white;">修改密码</button>
		</div>
	</div>
	<script type="text/javascript" src="js/jquery-2.1.1.min.js" ></script>
	<script src="js/mui.min.js"></script>
	<script src="js/base.js"></script>
	<script type="text/javascript" charset="UTF-8">
			document.querySelector("#modifyPassword").addEventListener("tap",function(e){
				var oldPassword=document.getElementById("oldPassword").value;
				var newPassword=document.getElementById("newPassword").value;
				if("" == oldPassword) {
					mui.alert("旧密码必须填写", "修改密码验证", "确认");
					return;
				} else if("" == newPassword) {
						mui.alert("新密码必须填写", "修改密码验证", "确认");
					return;
				}
				//利用ajax访问远程数据
			 var data = {
			 	userName:localStorage.getItem('userAccount'),
			 	oldPassword:oldPassword,
			 	newPassword:newPassword
			 };
			 postData('/users/modifyUserInfoByUserName',
			 data, function(data){
			 	if(data.code == 200){
			 			mui.toast("修改成功,请重新登陆!");
				    	mui.openWindow("login.html","login.html");
				    }else{
				    	mui.toast("网络异常");
				    }
			 	}
			 );
			 
			});
	</script>
	
</body>
</html>